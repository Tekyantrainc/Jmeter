pipeline {
    agent any
    
    parameters {
      string(name: 'SERVICENAMEPREFIX', defaultValue: 'sitename', description: 'sitename')
      string(name: 'TARGET_HOST', defaultValue: 'https://wploadtests.roconpaas.com/wp-admin/', description: 'Any site url')
      string(name: 'NUM_THREADS', defaultValue: '500', description: 'users requests' )
      string(name: 'RAMP_TIME', defaultValue: '500', description: 'timing for users reuests' )
      
    }

    stages {
        stage('Hello') {
            steps {
                withAWS(credentials:'17faf524-bf74-4003-8ef3-faf748fddbae') {
					
					withKubeConfig(caCertificate: '', clusterName: 'rocon-wordpress', contextName: '', credentialsId: 'rocon-wordpress', namespace: '', serverUrl: 'https://529e18dfa15f579357a7473f2f0bf5d0.gr7.us-west-2.eks.amazonaws.com/') {
    // some block
                    sh'''
               
                    kubectl get all -n ${SERVICENAMEPREFIX}-ns
		    
		    cd /home/ec2-user/jmeter/apache-jmeter-5.6/bin 
		    jmeter.sh -n -t examples/CSVSample.jmxjmeter.sh -n -t examples/CSVSample.jmx
                    ls -lrt 
                    '''
					}
                }
            }
        }
    }
}
